class Api::ActivitiesController < ApplicationController
after_action :set_access_control_headers
skip_before_action :verify_authenticity_token, only: [:create]


#Gets the list of activities
def new
    
    if params[:role_id] == "1"

     render json: Activity.order("created_at DESC")
      else 
        
      render json: Activity.where("classroom_id = ? AND school_user_id = ?", params[:class_id], params[:user_id]).order("created_at DESC").to_json(:only => [:id, :title, :message, :created_at], :methods => [:image_url])
      #Activity.where("classroom_id = ? AND school_user_id = ?", params[:class_id], params[:user_id]).order("created_at DESC")
      #@model.to_json(:only => [:id,:name,:homephone,:cellphone], :methods => [:avatar_url])

    end

  end

  

  def create
    #@activity = Activity.new(activity_params)
    
    #if @activity.save
     # head 200
    #else
     # head 500
    #end

    result = { status: "failed" }
    begin
      params[:image] = parse_image_data(params[:image]) if params[:image]

      @activity = Activity.new
      @activity.image = params[:image]
      @activity.title = "Ionic post 2"
      @activity.message = "Posted from mobile 2.... Cheers!!"
      if @activity.save
        result[:status] = "success"
      end
      rescue Exception => e
        Rails.logger.error "#{e.message}"

        render json: e.message
    end

    render json: result.to_json
      ensure
        clean_tempfile


end


def parse_image_data(image_data)
  debugger
    @tempfile = Tempfile.new('RackMultipart')
    @tempfile.binmode
    @tempfile.write Base64.decode64("/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxQTEhUUExMWFhUXFxgaGBgYGB0cHRgdHhwaHBccGhgcHSggIholHBodITEiJSkrLi4uHB8zODMsOCgtLisBCgoKDg0OGhAQGywkHyQsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLP/AABEIALMBGgMBIgACEQEDEQH/xAAcAAACAgMBAQAAAAAAAAAAAAADBAACAQUGBwj/xABDEAABAgUCAwUFBQYFAgcAAAABAhEAAxIhMQRBIlFhBRNxgZEGMqGx8EJSwdHxBxQjYoLhFUNykqIzVBYkU2ODk7L/xAAaAQEBAQEBAQEAAAAAAAAAAAAAAQIEAwUG/8QAKxEAAgIBBAIBAwMFAQAAAAAAAAECEQMSITFBBFETYXGRBSLwQlKhwdEU/9oADAMBAAIRAxEAPwBZ4hhvs7sSdODoApO5U0bZPsetIeZNSn1McShJ9HnTOeCoyFR0ivZqQm6tQbZYQEdl6X/uFHwT/aL8bGlmiBgsqWpRZKVKPIB43MzTaZIsJqz/AKFMflBNP2lqgCJGnpQOUs/nDR7FCCexJ+e6V5sPmYh7Fni3dn1T+cF1MnWzrrlqP9LfM4hnQ9g6o5CED+YC/leGhPplo1p7MnAt3fxT+cZ/wqcW4PVSfzjodP2AX/izZV9koT8zGwlaTSJHEZKm3NMaWIaTkT2PM3oHjMT+cCmaBY3R/vT+cdhNm6AZ7k+AB+UIztb2eP8ALB8JcHjiuxSOUmCnJB8C8G0uuXKNSCx+fiIf1+r0pSRLkKB2USzeTn0jSU+EeTVPYydSlMjVgM0qd8FRp+0ezJsn302+8Lj1jXoWxB3GOkdV2L7QBY7rUMoGwJv6xtVLnkvJzFUYeOs7W9lEnjkHrRsfAxy2okrlqKVJKSNjGZQceQ1Q1puyZ0wOiUog4OH9YcT7Mak/YHmoQHSe0eolgJCnG1QBjYSPbSaPflJUOjj840lDuwqNTquyJsv36U+J/GF0SSftJ81COrR7ZylWXKUB5H5wvP13Z808SCk8wG+RiuEemWkc9L0a1e7Sf6k/nBD2ZP8A/SUfAP8AKHpvZmkU9GpY7VJ/SAf4WUn+HqpXlMpjOj+WShVeimpzKWP6TC66hkEeIMbz961soAialY6LSr5w5K7fngAzZEtQ6KD+jmLoX1/BaOU72LfvBjvdMvTzk8chCf8AVT8wYFqOwtHfCfBbfjGvhfTGk4QzvD0iCd0EbTtrsuRLDy9QlX8pYn4RoVEjEeTTT3IOGck/Zv4mKmYnrCoXbnEBgQYrHMxHDPUIASIoVQA0HNnHrFWP0RCwUeUVc8oFGkzljCyOTGGpfas0Bu/X/uMa5A54i5vF4IPo7UnDE5d+rxD2jNd++L+JhF28PH5RlKhzf6zDUwbD/Ep4v3q/Uxg9oTN5kz/cfPeEVKvb9ecYmT+uIlsDo1q7tMX4VGKr1a91q9T8LwsSohmGIir+Wf1i7gIqa+TFSoecBJAb47xUTEu7sPrEQDLvvFUHqfSKKWxuAeX4GIpZAGBv4wAcYJBPhGSrpCsssAcvvtFlLubt+MQBqX/WIFhJtA6zjccowie9gb8hAHT9he0y5ZSiZxIw7e75x0ut0MnUpCiAbWUM+seYiZ0NvrMbLsrt2ZINnKHumPaGTqXBpP2E7X7MmSVF0kpeytoQKv8ATHo3Z3acvUIcAHmkiNX237MhfFJASu5pOD/eLLF3EOPo4pa92ESWSRiDazSqlKpWACNxv5wqqZtceAjxoyXUG2frEBHnFFKDsSX6xWoB9oAso3/vFalDOIotWCk+I6xSYs+PnEAQz9mjIVuRAq+Yd+sZUnOMRQFXiKFUCMtwPHbaMLCqbf39IAK5jCpnjAQVNYfXhEUSLZfxEQBq329YwpQ/QxQIOW8bxQTGykDrFAd+uIp3h6QNWo2bzgXfCKB5Kg++L3xziwljDE/lApsy5pS3QmMzJisi+/1eLQChA8r/AE0UVYg2GM7wJWof7PFt+m3rBkJu5tYXiUDAUVNxHfYWiBDXd3s/KBoORg5Ltjw+sxEzgbEHm7Y9IgDudjY8+f0IhWSBcNgiBCeDt47fAxCsEpHPLFt/jFBmWoi4I8Ab9Yug8L0PyLedxFTKY2G9rxWZMueFrMGJuTnzgBhKSSH3Abf+0DmSzzbqWt4CFValSOjliCfq8W/eTkkee24xABFEj3rh2tBJRIZvw/KAXAsX/HeGytIQGcKfffnZ4AyMZw/mYpcWSNoMieKc5xazYv1gEyaCqx8Gv4woEUTcMz2ZvxeKTXcuWDNz+UZLAfavgn4vGJSjgIL2uW5bmFAPoNbNlqdMwpHIWe/KPQewe30TUhJV/E3H5c7R5vKXkBrne/jdsxQlQulkkY/uRGozcSp0es9p6KVNBCw9jsbem8cZ2z7LrCqpTFLObs3S5vD/ALNe0JUyZhDuByHIfF46dQq2vfBb6xHvUZo3szyNc1QzF5Sr7HDk2tHe9pdgpWCpKCFENVli1zSPnHKdodgTEIUpSfdz4c3ZmHWPGWNoy4iBmB+Re36xQzlWxcsRGEIs7v058ootAPCwB8xGDIQrChdx0HPl4wNXDn16REyFAEEtkC/X8oHKWRfZn/uOkAQTScAdP0iyNRuQX8R6xmVqw1w9wXHI84udSn8DAFDND8vq7xhCgTbnFlMXKbluXr5QGTODlkn0x6wBeeB67QNjZrv9XjLJuBk/RgZZi6bA5HzttAEXZuEjoP7QSofd+ERJ89vx+UETMDZV8IAG90vd/ecveGNUGIIsC2DcPAGNySEK633IL7Y+cRZAZLurLHHl0jQDr5O/1sHinfpakv4ctwx84omWAeJgprC7X5sfjGZYHCXCWSbeOL8ogMahXE9JBbd/RrRlKwGwCzs/4D8YHMmIwkHqXPw6eUEmGyWAT1Vk/nEBR3JLsA2Ll+XlBQllGpVtnb8uUXACjY7X8fK8UK0nKmTcAi7Xa/SAIkVlmqHI2b+94lFnLpF7kP8AhziSVoSQKr07C9vn4ZvFp80Kwd9uZBDG7wBEpa6uIbMPLeMTw78IAxtty8Xid8SzsWDMcpxsceMA08wmxcgk8iBzgAyZZCrIZ+QA+B3/ADgk6WaWqu5s4+cBRUVruHBuBnFyVeYP6xdcyxAItgZPQvFBRTu5JCR90X6Yi8tNQd6tja9unnAFa5FgLJyrYW/HeLTNaFBwRYP+bHfeAGdQi3kPXeKJ4QQFNVzZ35wNSwpJNRZjm2ALv9YgCk1sGc05fPp49YA2KiBhbOAQ/jz3MAXNHIcuhP4wCTJcMHIFixdt/E5jHdsGAJVhxt6PEAaXNzSriHQxv+yPaVUriUVLBBZySHHMHDRzRl0Dizya3jB5CHF1AOm1xyuH5xU2naCPVuze1JU1AWgpUVJelOeoY3eKKUkggpJSbEN6O+Y827PnKllpaSSWIpIt/UW+BjpNV20UjhceJe/QtHTCWpHtCLlwA7Y9mEWMqZRY+8SfC2W/tGol9kKHvzUjwBP5RXV9sE7xrZvaBO8ZlGB14/D1cm8TpZIsVKJvyH4RE6fTj7/+7+0c4dWecZRqTzift9HTHwYejpEaTTu4BB52/KKTOxJamoWAR95L/I/hGiGqIhmTrVnFup/KH7fRZeBD0O/4NMl3Smq/2C9m5WMa3UJKSxJZnHnsd3HWNpL1k0Gy/wDi78rZh6XInTyUKlhakhyBKUFJ/wCT+UZ0J8HJk8Jx4Zy+4YAnxvBUgh3D8v782MbPX+zU4ATJaFUli9JV8vlmNOoAmkgFjcg+vxjDTRwyg4umWpBu9/D0IgJRN/l+P5Rg6aq5Nmiw0X8h/wB0QyYM66Umxcvk9OR9ILMSKQoqqa1zZJ32uN784qhQUlSWDFylQIDcgG3N88oGQACrmGfk3nf9IoGJ00M6gKk2OPX0is8sxNqhubXuwLm/00WlU0AEi4cZNr3bygUuY4NKipNiE04IDY8T6wpAyoHgpIqG5chht48sRFLc2c4ezXtgjlDE2cCkHF8KFhsoc/1xFa6Af4jpJ5l84ZrjxgBZeoKSkAXHVmO/ieflBWKxwgEnDEBuYb6Z4oou7Epyb4d2JBfk9orKVSOIDF7s/UnbwhVkLy1KYKWSC/HbiQx4nxwtfzi6VoAcqKw5dg3+khs2+cZE0By+wLYNreBe3pAxMck782IfYPjlF0lLy1JJC0smxtYEv8X9d4IJKbFJIJNnJA5M23lGvkyyCo45WLZDljvi8H/eSwTTYuwwrqRsecRog6hBAsTbnYH9GtA3uUqcApBtdjdjwhsP6wsNWSSlLki27BrPc/F4HM1UwVNgsQXZmtv+RhuUPKqmAuGUGIu4YC2N23ihkhuIJv7qnLX5g225+UBnagqIpJG9jYjFwQ8H7wUhJdr+6oObZJv84UC+mIRYtS4JY+RpVtF0TA4BdRLg2bwuIWRMCOEKAswB23Hn4xifOYhCwlKjakPe5DgPv05QrcDC0JIYJVm4BLpuLMT1xF6+GniNQYml2beocusYJSkBwygwvgW5vYm9rfGBd8Ahgok/dHVwCx6lrj5QoDUqRTit2AUFF22w+IJ2d2YqeooShZLcnpPlz5vDfYfZEzUzAhDthS3cBIyT12A3fxj1rsvs9EiWESwwGTuo8ydzHrixa93wEcGj2X1SEAIlYG60Of8AlHKduafUST/GlLQOZFj4KFvjHuYEWVJCklKgFJIYghwehBjqeNVsdWLyNPK2Pm9U0xh49Q9rv2bpUDN0YpVkyX4Vf6CcH+U25NHmKpZBKVAggkEEMQRYgjYxyzi48n2sGWGRXExU0M6eTVuB0GfN94AQzHYR3v7OtNI1BnSJunQtVIUZoLLYuAAc2bYtcv1zFWazZfjWro5uX2WooVMEpZSksV0kpFneq4a/liOh7E9lk6mTVK1CTNB/6ZSwHJJUDY8izGPRfZ/2dGmSaJy1guUgtSx5jfrjwENajV6fTSSqkIl1FJTLQPeLuGSGdwblo2oJbs4Z+ZKT0w5vau/ujl+yfZJ5CRO0/wC7zEe7NQt1OMKIcgjm5cbHl0SewwUo79ZmrQzTEihSfAgvSdxje2yWq9o1HRmfIAsunjFRAOHAPvAkAh+cc/252yuZptK01SZhSozEBRANKgkFQGxIIiuSR5KGXJXW7X2249nbr7mWZhJQFBNSy/2ea0/iRHKftB7NkTpBny2E1EtKwpI95BIsWzYuPA9Y1Wu9oEqnzpqEKNcnuSCKalEJBUXuw25whqO1phDFgkS0SgA90Bjd/tO/rEc72C8RyW5xk7HCrhYnDB/Hf9YwlRA99XpF9fISFEEMh3ANwTkjoAScxb9wk8lDwFvI8o8qPnSi02mZlSRUd3bcbY3cMPnAdTqFEJSgGmxtY0szBmtcbj8IpIUhSbJIBAVi6mw58/OCr1ITY+DPgM4GPWIZKBwT0QzYvtfoSf8AcYymZwJUrhVnLAlyzixu7+cCZZN0AU5NWeTAPe8MTpQUgsxOGJs4/v8AVooBadfEp0ggAkYso+NvPMFOoAFRcBg3vZ5YIjOm06WBKxSOJZOLuwAub/TRhuJqeEipAZ3chy3Mu/rFoAdQpRSCkkO2euGcf3iiJCtizWx64N4xqJhNjUTdmwzZZuW/pGJ80pUmokgueHobX8bPeKkQyuY5BY1Xsww/hb4YjMxALHiBBw7AgdBgZ2f4RlaQDu7s2SLAvj3rtv4RnVSLXVhLlt2d7uC7Dri4igHNcFNLhNnAJs4L/pGEy6iq4LN0d8ZNjFJswMCEkOzcLnOFM9rb+toyVuQqo2xYNlzfblmICTHCRSHIcsGSfV/zxABqwsAKZKgGYXtuAr15QxLUASElyeaveDksBuL/ABihmBd8AMLsHa43GS92i2gXNK0kJBS4Yk5N7tbp8YkwACwGQ4c35NY3uxaKKKd7kWuBu+MXOHtYRhK2Zjw9bnkxfPLOYgDTK0AlSW3AdyAQ13OPB8RYTRYFk2S553uAdheEpqhbiDHm974Z82+MMgAJfcknyx0ObwKN6bUAFSCCQUsS+bNYgtUALkRSTNBdKSxAYHmPsl8nn0eF5LglipyGvna7YaDaYXBLEi4N8HHTb5wo1CLlJJG70nakyTLolrMt7qpLEnqoXPy6Qun2p1UtTo1EzwUoqHopxGt1M6FCY9bpUj7GPDGqo9W9k/2iImkS9UEy1mwmCyD/AKgfdPXHhHoQEfNCRHpn7M/axVSdJPJINpKzsfuE8uXLHJtQy9M8vI8NJa4fg9NAjjfb/wBjk6hB1EoATkB1N/mJGX/nAwd8cm67v8hAqN7/AGQQWIKubvgGIdOpXvqcPhPCMul7uSPFjyjct9jjxTeOWpHz6rUy5fCgd6vp7oxv8IP2PqNTJ1MvUhfE4TRhCkM5SR4AkdQI6/2w9nJen1FUtATLmioACyVD3wBsMH+qEpfZwWKTvys24IIuCPWONpxZ9tTjlhb4Z2Pa3bPe9nzFhXdqK0MkKIIcoCkuGJuT4xzGm7R7vRTNME11zklDYQkkFZ9QfWF5nZMw0JLTUpUlQJIQrZnZN+dm8Hh3TdmTCXUUoDYSSo4GFEAc9jFk29zwxwjCOn62jXJ1Cko7uspQV1FIHvqZg+5bkPHwEJicsp8P3anbLe7z2jey9ElBJAuckkk+DnbpiE9SmMHQpb7GtW5wKRzOfIfiYAUJGEh+e/i5u8M6hfWNZPn5i3RtRvkT7SWLKYE8QyzYL+TmEBX/ACQzqWIcm4NhzhH94O6H/phF2j4PmxrPJfzguZJcIupILFmvyyLJ6X8oNMTelISyRhJBPVku9O34RSfogpdSeAdAag3LbnhtoZEhpfFSHN2Dv0tuAH5RuzlMFyqkhLi4O/Py8beEU05KQe8Ap4WU7HOS1+Q5ZtC8vUkLOyQOJNt/ENfk++8HnKBvhg32SkscWbqbdTGWCSSClZI7sAj7LAhieElnFncZYxJEiliEBhndRffJAcNuIrqtZQkhi+QlGCMu2Lg3vyhX98UoigKYA7gByOHJAbFnJioGxmyyHKue5uA1vAWyephNLqBSggCn7KuJLHdiLEPvzzGJM6ZNWKlUqSm5Cn625gt+u15qeICpQUQ7ip1eAuDd+HaNX7AnL1FPE2AQ6RsDZiTZWDe5eDgUpUFH3gACxsDU6QPPb+0VlJ4ilQrIYOySSSfeL5AbNoMpClWDCyiVGxZjjcKcjbBhyQR7sqUTVRZmB5i1iKnH4xFKICVjpVcEtysWNx8YJ+7kpS4SeZNi5OS3r4RSci/EkOTsOb/Fr2L+sAYWygAKipVwm4A/psws+5gc2QQeEguXYi7Dnw3L2zy5wYTQanUCzs4uB0OWt8oyueEoBA+1lN23BBFmd/hBAGJSk2IYsGFV97PfpvGAtQckO5ek5DbZby+EKztU6nCS/MC+z2PXnDemJIILgbmwVY2Lks3lFopSURuABkJpG99vwbEXCw9yWfOfIDlufCFysh2SFMbkqJPkQwBxZxGUT3sqXTZzcsPEjHTw6QA0JYLcRpYnx6kuMjbq0NyiyfH6EaeWpFTBIAFwXd+oJPR42q1Wio7fDhbcii1RQqgM3UAcyeQzAikn3y38oPzP5RGz6sUMnUbJFR6bF9ztF5cslipRLFwBan8XEClnlYcoPKW0eLkdMcd8n0B7EdsfvWklrPvp4Jn+pLX8wQfON/HlP7H+02mzZBNlorHikgH1CvhHqsdWOWqNnwvKxfHlcVwaL220delUreWah4YV8C/lHD6Zf15/k/x5PHqWolBaFIOFJIPmGjxyXqCkkHYkHy6eXPYdI88q7OnwpNxcfR02nmBr8oKZ4GPrwjn06zr8Py+X6QOZrjzP11+t48bOv4m2bjVzx08vxjS63ViE9RrifofFo1eo1dzGWz3hiDaue8a6ZMis2dFJUsqIAyYw3Z0Uoq2O6HQGaFAjhp94h2sXZDOSQ9wbN5Q1/wCG5X353klLeXHiN/2RMkTkoZLoAoQ1lLpJSsFJYu4JI5Hxi6vZxBvSPJBI8iJbR2xxpJI/L55fJkcvZ5vK1w4jTdINyWIw4SzceMsz5g042CQVOWbHEbHhU+L9HihloqKlPKe7XJJ6EcXXHKLzdKlQUeJ0qLA03vdltclsvsxjyo5iTlIMtwVpIsWcKszgjBB5l94pptGUuqshFy1IqLsQ4Dl+vUMINImALVxMKQCSQCDzZiz2Fnx0MZ1OodwFBY95wOKprg8QGLYgiliriBKmCi4dmGWSwFzZvDnAJQUDSUljcpOBYioEXLC2b/JfUSjMJBqCQApa1qOCBSE4CQ6gwbfd3g2knLKlIWCpNBYK2zcVh8+XjBkHxp092pglqDcizuwe7tcwtKlkoqKAwwBa3MAWywCgxzBJU1KUpqUHIJpcKCQ5DP4hw+5MJVrqHDsLBBwAQpnxYlj67RKAxO0ylAIS4dXGSqyQDa7OHvjl1aNejUpLyylnILAM7Eniw5Khdg0OyUK41JNNQNZIdw44U3BqfmCHHjBNWmtKUlJd6hcuSXcWuCAPibWiqQFpK1KNmpIsRYguQxci+b3zAllIVSQoswFn8CSE/AviGJcsVUgUoUpklQxgsoHr+I6QRWksSQCyylhZ1AJqNwCb9TGrQFDp7cFjU7YJa5FJIGSR6RUTgkFiSamc9XOOgis/T7IWzu4SCxO1SQ5d94stYAZRqJAqAsQNyzvfw+cUA5U4saalF7gD3WfZ3It6wNU9pe7294izndjteIZ6VBgwc3PFUwekYD7+HWKaeWoKZRKjSAxs9nccw5AwXMWgQrsSEkB2Z2PN9g2/PEDlKsQoPbx8chj+YjFalOQCKXpKmYbGw369Yk6YTQksSmxF0hQc+b7CLQLTyQLpA5sCC3Ijb4QPT6tR4agw3+smMTFUgpaon3i7u+z8hiE5iiGDNTjw5PuYjOzxZ1sbULCbJHnufOJVC8qcFJiy1R4O73PuRaS2GEKhiWuEEKg4mxhnrGR2f7PdXR2hp75UUf7klI+Me8PHzj7ErfX6Uf8Avy/gXPyMfRVUdGDhnyf1KvkT+n+wwVHg3bc+nUzw9hOmAX/nLfX5R7qFR839t6urUz1D7U2YR5rUYZ3si/pq/dI2R1x5/OBTNb1jTGdGDNjls+1RslamAGY8Kd5ETOiFGpU0KUwLkO9sY3w946HsHuklS5qSsJHu01AuLgjctsxz4RzMhbE0pJJLmlLnxj0H2f7XlFwgUrYgpUnDKa3EeRZju7c+nFFN2fI8zyJRTx3bf+F6G9GhE1UtUorSimqk2Is6klKrvfBHLo27krdIIWwYMKU26Rpe1pQWtJl94gD3mLBkhX+WGJy+b9Y2cqSCkfw04GVfgQ/rHSfJPKJikqSQk+69bAmwFgoXZQsWF4RmUg1SnIyqpyUg5UAxGz/OLFQHCJilVMpgArG+1nGL8xCMhICyFNUkEpKgTaq5vkuw3jwPI2QKaGWBMQHLbm2XJGSCOhI6QDSzElIAwxUA54UosbmxTtcBy2YamakEFSu8NSbUhYdhsajc7MOfKEtVqK0khbpUQlQpN6SkEhwS18KPI7xEhRtdLqKlBQYW4muCDsRYG/NiyTYQCfOBSoBamW5cZ4VCkJIF2JHkekC0c55ZqJpYGoCze6WBy+AQLbAXiaNhMl0NSAVAEBl+8wIJyVFza7RGgWlzOFKkqrlmq9yEk1BLizGq5tuMQGVpSAqynQKkFyEg1Oo1F3YMCb5DQ3qtSwSmYUErSSALAWIU5IYi+AC/JowEClQBTSVJSEhylwoqBVyKlP8A6mDG8XoGuM1aiAXWVBzSWU2AXOAkP+MMLUUhEwTKVBLpN3UniaoOzPb0i2mm92pZJrUskNS1IdiMgkO3CNvOBylKE4kHhIAAccThhUEp90ORTseUGgMztVMKVWCqyK9mJuCX+077b8oxN1FYSm4Ti9jZ8Eh2JADlgS5eBrpU4EtRNi4IpDC1nui4JA+Tw9p2KUp4WpTwkOhL7pTYl72dsxkAQp2qXxpJcq4sHIcPvkDI3Z4SnpSQMFSfsB6WfBXuTaxvsOUU1RK62VQeE/dBsWUxBs1stboYd1aRSCBUEEJUwFz9okYBq6HAjXAFwslJrbhN7YA6G7g7ZxfMJKm3KglqiE+9cMbWZ8D5wTUgJSAqZTMQ/CFFlAkUAhWFZts8WSFlJUSQkEUg2JJUSosQ9RBw3lGkyAGACguwuHBJc3x5CBrnsA/uh25kPufHaGZgXSAwFmH3iLuLsQGZ7OS+YDp0VEpBFaQCAqyQ1JBwLMoHc8PqsCsyeRUEhIy+BgsL7coUXMJsq4A9D0I/CNpN0JAUTx2chrPckkgcxh3gapHCL0EsUBTXzi/D6+LPFtGkasPkXHMZ8DBpep5/XlF5OmmsQlOU3+8GzZ3sz3hYyCdvAjla8JRTOvF5UocjiZnIxeqNb3rHIPX+8MInjmR4h/lHk4NH0cflRkd/+yLQGbrxM+zIQpZPUgoSP+RPlHuomR49+zT2n0OlkGWtZTNWqpaqXB2SkM5YDmMkx6Po/aDTTfcnylPtWH9HePXHSRw+VqlO6dDXtL2uNNpZ04m6EGnqo2QPNREfN/e9Y7X9q3tamfMGllKeVLLrUDZa8N1CR8SeUcAZkeWV26O7wofHC32N95EMyE+9iznkY8dJ2vKhrvYtLLkAbkCFtNMSSHNr+Ng+4xaGtNM4QRapQDHFth/Pj4RpQOHP+oJKobswpZBIBPEGDEZAJta7mzdY2Gh7asjgPdgsUqcl7uCNg4Ykv5xptU6gnPvDxTdrtm9zz+W27M7NCVBPCTWLAMBw3BALuQQC4Ddcx7bJHx5Sbds7fsPtczAQUpMql+7eoullEEjicEWGG2DRlftRJcuVAvcUm3T/AKUcf/i6ykgKcVBkMAlJFgUpIsH3d7XyYaHdffSetU4P5dxbwj0jMWaFYUZYpYWcgGkFn3ZyMdMwXS6cFCpiS0w92XpJY5BApqUDdz+sEXp0GW0xKisOs0+9b7AYhNTDkTc2iImBSQsgoAC9wU8RPDi5bbI9HweZSTPUFFKgqwCwlILCxADAFnuSXLEC72h2XLHdqSpKkFdQLu9IZyHDBO74ufLE494Asg0AupLWPRINIZ3zzzApglqSmZSwDBIsCzgbFsOLPFYBTJaSEoNfdzCAkhLEKcqBASnBLk4DPYQcLpme+pZA4kiklXI1Gzt/+bEWEY0bpClKLJINwkhg5ApWz4pD3wzmDCSkkSkrJK3D3tc3VSQwG5DZJO0R7kskjUVOhCmJFiWJCgWdnpO5LNcG2IwjWLAKbqDEKKiU8TCksAoCYbeDsxaCSJKElgyZhS60psRLAIBcmkF+d9/FbWpE5SqVcCAxuA5b7xIu7HGQNxabMplSkqVe6ig8S0OqpwQo8NhcliMnaJ3CWSmWoGYgKWGdy6hWASMtt0azxTUsJSkGmoMVAOE5QKSRcnLFmyIU0/aa0SiqkJSFBK1BgSQAKQRsm+24vCmDc6clSKgvhB4agHqBL71UkDByOcB00899S7JWHYktdLhaHeku42SWsA8Eky+EIQTUoBqlpuQ5RdTBgCLnztCupSkE1g34eFns6jUlmcO4bfaxjKYL/vYBCjWAXQU0uHO6nDtUXt18yJJWli6nFS1BTAYKQo0s5DYY/OE0TlApYuk3AYVJLAkKUVUpYkfAwXTrUsXU6FLakJY5ABTcuxvxWPxjVAqrSIShKgolRvU4ANywUFG6nck2HiYvMTSgJCBVS/IOQRdy532HO8A7QnGWhIIcICqlMkEu7BnNvdd+WBBJijMS6OKV3ZbZjcg5eouxs4beAFZiCBQU0sSFX94skBg9RZun4QWTKUmtVN1n31JuGSkAEmwLknw+AdJrFp98KdJISTxBNLOFBwP6lYcnNwWakKBmpKiE1OlKuC7cNRAYC1ma7gnEV2WjGtUEBQSXCSQAp7sogvuVEkqD2YC3NeZpCopJIAUSANrB+JxcdHDPkxUaMlFQsqpRScEOS/EWCgdr9YImaqU57rgS5B4VEuQCQkcIwSPhBbAHrZRSriLEOQQ1TYI5M3De/wCOdJJUSU00G9ixJIuutTG9OzFujw8laTSf4TC6qi13cEqAISrxDOPAwguWoLAKkSyPdTVWc2wDUFAi6X3JbERPoopqJbKLbHiuBjdjj6sIDqkooSwv5lnJs2T4vG07viDoBBcVEuUgPhIGSCHe7lrQGZIT3lkF6ftFggWaylOzFw755NFTBrDLHQHYB+I8hF1KKSCFLpO4zzOWxG1X2fUWKTn3iWPWwDGBaJ3JlsSQQFEXDM1i+Td3G14WmbjklHhlf4zl5g7sHiWR7oc5Tc1YYB352MBVqFcLEEE/dD3x9nPTMNS5FzJJJKxSTs7PLJL7FnPJ33cHZ+k9+lbLllLjoSymKSGKVNfqWxEpHp/6Mv8Acy2gUtS1ImVuNgkg5ZikX38mMXROrJSoMWITSDxWUliAzuQet7xafPmsQquzhbrJK7Xuovi4ctdUDkEE1VUmqktZk3wrABDDyvmFLkxLJKXLbK6mWtJNaSaUgu3hlwDvvDaJwISE0pS6QKgwBuRdgHqvfr5MaIpSKKeKhKkAVGq5pNzYkkAh3DHNoRkBpzTBcFR7sm4UAWJuxZs9MwqzzGdUFIWGmJKqnLKuOK7MPd+bYgknUATlA8IPESSGUSA7Xc3NxyEAlkJVWQSTgpTa44qmNm2F/jfM6QgzHWAUhg5S4A+0qygWc5POAGzJMwHvmDlVZJpCcFgwuXjXJ7P1BDhSQNgVJcDZ+LMbOfJPElJ4UsaGZiATtYunifzipmzRYbchbyYwToFdehMsslBTUqnNWbJuwAF8NzeJrNdQvug5KAmhATve6g+cFgGA5XcS1ha04NRJYJFCQn3Tdtr/AJ2eS8p4EhZPFapVzuo7Nc2jVGS+jWVlVNi5cJAUMOcAAHmXUPOGJSbAFYJSS6SbGlRJUepsM4gEzVJTMKSipVJAdGSMI4cp58wGzcEnzVqGApRAyAzlwAlGNi2zCIwAnTwsGrc1NcEEpBaymVsRsxAhxM5MpipkgUqmBjeoEFJtdxts78o1qFrCFKUllJPESl1dAgBiGuTew+Fpk8LUBNzZHCSWUz+7gggC4uYUAgYlSwoplqW1RAJUlJdKrB+LAd2i2imBB4lJKlA8HEUpGxNwBguCxPrDOimiWuWkpSXmMqzYCiD97pSOREa9OmUGchRZwA4Y1KcepuPlBAL2lrVKmAAKAqKgBcLsaWzlrC79Ls8itqFAKSo8WSAXsCgKLF72wwxsCkspcpILqYVYQ5Y92GZg7lR8A1nUk6aYilGnFSb1KWMnkLEMXYG+YlWBzhKkgLUyACQUnBsm4vvzOwjGr09aUpBBYqckF6eGkgmwD1HBA5QrptGRNJWrgAdSrUvvxvnyb4RbSpSZyEENJBpIqYPcAMhWxuSbmFAdUVAIQlKSknh3cO63FPINZgH6XKJqqpalWdkhIUSHIVwkDhDMp7G7X3gWmnsEhaVrdLFQIwRgWFrkVG1j1jGqQJMtSUP3VIVWeFuIMAUgMoE4AZlF+cAF0iQUIWVkqYi4ASovYrQC5ORuHu0Krk96QBxFqlElQCgomwb3gwbYMScQTQaoTaikLIsklTFIJu4JuQGukWHV4ClBlqTWsfw7Kc3VVcpCUmxZtn36RewW0klISStKlKmVcYPMHgYGkgZUrNhcYjEyWwTKQo93YqZN1YpFyzF8uw5XhdeqQzSQSkqLhIYkAAmpR+0QTtsWYxaUVqXdQpCTSCeRcCzN6OPJ4MDGmLJWtTJSCXcGwGAz8Vtz0gaJKZwUtKgt/wDKVUHAs6EHhe25J6NC5CXWkhNwTxKS5vsUPYmw3wGIMZ0S6EmWksXsUsClxu1Tt9EGIC8rswBYuCCSFBnexZ5ZZiBlrW3zBZmnKiqipbJBUpP+YOQG/gGOQ0FQlQQSE1lJABOEvcmkDpv8WtVCU2M1TqdVJDVU7VfacPa2B1DS2UV12moqRVxDha7AOT73XfHweHpJVNSkOkkJTVMq4qEnCks7gmzE4uTaNbqJUxRSaApnyqoi+XNwWZwLQ7pE92gzSpaQgc1EqqOGapzjLc4dAuNXSQFAhJNySWpAOE4GNhueZdXVSSsrKEkFbM4cEqYUgCzi/wAYY7Q1APeGWk0h7hwWytQ6cTXwwaE5alGgKJKCgcDPYqe5VZwT6QS7BTVSghClJSSWdUwm1VrWAPOw8b7REvvApYKgVHJSKOr3d+hGYhkoBZdSiC9kkp6mlNiLsR12eDold8QZqVpBN1S2SGuAFBiz5DufRo10UT1M66kMlrkNkJDsKVFj/Sxgsg2QkS01P74UQSDchQULJ53bL4h1chKU1y2IBUDUQ607OtJJLuE7FT4ZoAnTJVMQa7pAU5NSUlmANIAZ02vdt3iMDGrmCmpRKu44XsKCboNR+05CWtiNdIpWpAP2VMSCEkDAvUQfKz5Ai5USF6dAKkqNaqlUpqGVNsMJOS3WGQhARLFjMXVRxKYkukEBmCCEuCSMnNzFSoGtEhKagVCkkMyhbYuE1Bxn1GCYd05WEhIpUEnDgmk7pUd/QYjOrUhpKUlClrUoLUAFGykgXIsaFZF+cUEsJmLpH3UjkWsKVKblg/HJPgDE6cpKUrQFJKiEkKLMLhQLgAgbEOLwunVWDyj/APUg/Epc+MGnSwRdIc4LCzFRNINncq28dzAimT/2009UrDeVxbyhVgF2dMIU4N/4VzfIW9z9DaNprOCSsoJSaUGxO1h8IkSNPkz2I6XVrBmJCiyHCeg4fXO8ZTqFU6c1EFYAU1nAlsBbGBiJEg+QV7MNUpzcusOc7b5frmHOzLz5aTh5ZbYlpmR9YESJGXywMIU/eLtUEy2YAC7vYWfyhKbMImLAbimFJsLjuypr9QD5RIkZAxr5CUyELD1OkuST9pOxLRr9UP4ykBwlKAwBIZik7dSYkSLHgMb1v/UUm4SpJKgCzkJJB8XLwtKmESZigeIadBfqQkn4kmJEguAHl6pX7qo2JQV0kpSSKUukuRkFRv1MZSjvdPK7x1VpWpTk3IFj0ZtuvMxIkP8ApejoNJpEUpFIA4CwsHBYWGzbRzvtBMKZdabKoepg7rPFfrGIkTtEXJq5KzL7xKCUjuybHdjvG/k6CX3VVPFcu5f7Iy/ImJEjcgafVL/8uhdqzOaogE2wz48o2Op1a+5lAKIq41NYlVaA5Ivgm2IkSM+vuVGdAliGs4BIGHKVE2xc39OUTt2WJdRQVBplI4iWDnmfjmJEjP8AUAOnWagn7JUXH/wlflxXtFEF5iXuGXY3Fkki3iBEiRshXtbUKShISWBKQR4CXjkbkOMjMGZ9YhBHAQsFOxACiB4PtEiRlcfkvRsl6dKJ0oJDOgPcl3S93MJAVLUSH/grXf7zJv48R9YkSIggU5TaZTWeSgkCwcqvbrAVHu3SiwoTbODbMSJGwU1klIIIF1KQCXLkOi0bDtDTJCAwuK7uXws5fnEiRL4KjWaWYaVr+13qg/QCw+EH7PmFUlNRJrUyn3FL/OJEjQHu27pKTgCobXuXcXz8zzjRJkJIcpDnpEiRYcBH/9k=")
    @tempfile.rewind

    uploaded_file = ActionDispatch::Http::UploadedFile.new(
      tempfile: @tempfile,
      filename: "adam.jpg"
    )

   uploaded_file.content_type = "image/jpg"
    uploaded_file
  end

  def clean_tempfile
    if @tempfile
      @tempfile.close
      @tempfile.unlink
    end
  end
  

private

  def activity_params
      params.permit(:title)
    end

  def set_access_control_headers
   headers['Access-Control-Allow-Origin'] = "http://localhost:8100"
   headers['Access-Control-Request-Method'] = %w{GET POST OPTIONS}.join(",")
  end

end