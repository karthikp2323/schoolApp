<%= form_for(@parent) do |f| %>
  <% if @parent.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@parent.errors.count, "error") %> prohibited this parent from being saved:</h2>

      <ul>
      <% @parent.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
<div class="col-lg-12 col-sm-12 col-xs-12 animated fadeInDown" > <!-- div main 
    
    <div class="widget-header bg-blue">
        <span >Register Student</span>
    </div> -->
<div class="widget flat radius-bordered fadeInDown"> 
  <div class="widget-body"> 
     <div id="registration-form"> 

    <form role="form">
        <%= f.fields_for :students do |o| %>
   
          <div class="form-title">
            Student Information
          </div>

          <div class="row"> <!-- div row 1 -->
              <div class="col-sm-6">
                <div class="form-group">
                   <span class="input-icon icon-right">
                      <%= o.text_field :first_name, class: 'form-control', placeholder: 'First Name' %>
                        <i class="glyphicon "></i>
                    </span>
                </div>
              </div>
              
              <div class="col-sm-6">
                 <div class="form-group">
                    <span class="input-icon icon-right">
                       <%= o.text_field :last_name, class: 'form-control', placeholder: 'Last Name' %>
                          <i class="glyphicon "></i>
                     </span>
                    
                  </div>
              </div>
          </div>  <!-- /div row 1 -->
   
          <div class="row"> <!-- div row 1 -->
              <div class="col-sm-6">
                <div class="form-group">
                   <span class="input-icon icon-right">
                       <%= o.text_field :email_id, class: 'form-control', placeholder: 'Email Id' %>
                          <i class="glyphicon "></i>
                     </span>
                </div>
              </div>
              
              <div class="col-sm-6">
                 <div class="form-group">
                    
                     <%= o.check_box :IsLogIn, class: 'check-box', onclick: 'show_emailbox_for_student()' %> <label> Grant Student Access </label>
                  </div>
              </div>
          </div>  <!-- /div row 1 -->
 
      
      <%= hidden_field_tag(:classroomId, @classroomId) %>
  <% end %>
         <div class="form-title">
              Parent Information
          </div>

    <div class="row"> <!-- div row 2 -->
        <div class="col-sm-6">
          <div class="form-group">
             <span class="input-icon icon-right">
                <%= f.text_field :dad_fname, class: 'form-control', placeholder: 'Father First Name' %>
                  <i class="glyphicon "></i>
              </span>
          </div>
        </div>
        
        <div class="col-sm-6">
           <div class="form-group">
              <span class="input-icon icon-right">
                 <%= f.text_field :dad_lname, class: 'form-control', placeholder: 'Father Last Name' %>
                    <i class="glyphicon "></i>
               </span>
            </div>
        </div>
    </div> <!-- /div row 2 -->

    <div class="row"> <!-- div row 3 -->
        <div class="col-sm-6">
          <div class="form-group">
             <span class="input-icon icon-right">
                <%= f.text_field :mom_fname, class: 'form-control', placeholder: 'Mother First Name' %>
                  <i class="glyphicon "></i>
              </span>
          </div>
        </div>
        
        <div class="col-sm-6">
           <div class="form-group">
              <span class="input-icon icon-right">
                 <%= f.text_field :mom_lname, class: 'form-control', placeholder: 'Mother Last Name' %>
                    <i class="glyphicon "></i>
               </span>
            </div>
        </div>
    </div> <!-- /div row 3 -->

    <div class="row"> <!-- div row 4 -->
        <div class="col-sm-6">
          <div class="form-group">
             <span class="input-icon icon-right">
                <%= f.text_field :email_id, class: 'form-control', placeholder: 'Email Id' %>
                  <i class="glyphicon glyphicon-envelope"></i>
              </span>
          </div>
        </div>
        
     
        <div class="col-sm-6">
          <div class="form-group">
             

          </div>
        </div>
  
        
    </div> <!-- /div row 4 -->   

      </form> <!-- form tag end -->
     </div>  <!-- /div registration -->
    </div> <!-- /div widget-body -->
   </div>  <!-- /div widget -->
  </div> <!-- /div main-->
<% end %>
        
    <div class="row"> <!-- div row 3 -->
        <div class="col-sm-6">
          <div class="form-group">
             <button type="submit" id="btn_add_student" class="btn btn-blue" onclick="addStudent()"> Submit </button>
          </div>
        </div>
        
        <div class="col-sm-6">
           <div class="form-group">
              <label id="lbl_add_student_message" style="color: #52B4E5;"></label>
            </div>
        </div>
    </div> <!-- /div row 3 -->



<script type="text/javascript">



  function show_emailbox_for_student() {
    if($('#parent_students_attributes_0_IsLogIn').is(":checked"))
    {
      $('#parent_students_attributes_0_email_id').show();
    }
    else{
      $('#parent_students_attributes_0_email_id').hide();
      $('#parent_students_attributes_0_email_id').val("");
    }
        
  }

  function addStudent(){

      $("#btn_add_student").prop("disabled",true);

      var form_data = $('form').serialize(); 


      $.ajax({
        method: "POST",
        url: "/parents/create",
        data: form_data
      }).done(function(data){
          console.log(data);
          $("#lbl_add_student_message").text("Student Added!")
      });


  }
</script>
